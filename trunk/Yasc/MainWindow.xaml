<Window x:Class="Yasc.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Yasc="clr-namespace:Yasc"
    xmlns:Utils="clr-namespace:Yasc.ShogiCore.Utils"
    xmlns:ShogiCore="clr-namespace:Yasc.ShogiCore"
    Title="MainWindow" Height="90" Width="90">
  <Window.Resources>
    <Yasc:ColorToAngleConverter x:Key="ColorToAngleConverter"/>
    
    <DataTemplate DataType="{x:Type ShogiCore:Piece}">
      <Grid Height="10" Width="10">
        <Path Height="10" Width="10" Stroke="Black" StrokeThickness=".3"
              Data="M0,0 L2,9 5,10 8,9 10,0 z" x:Name="transform">
          <Path.RenderTransform>
            <RotateTransform CenterX="5" CenterY="5" 
                             Angle="180"/>
          </Path.RenderTransform>
        </Path>

        <TextBlock Text="{Binding Type}" FontSize="6"
                     VerticalAlignment="Center" 
                     HorizontalAlignment="Center"/>
        <Grid.RenderTransform>
          <RotateTransform CenterX="5" CenterY="5"
                           Angle="{Binding Color, Mode=OneTime, 
                             Converter={StaticResource ColorToAngleConverter}}"/>
        </Grid.RenderTransform>
      </Grid>
    </DataTemplate>
    <DataTemplate DataType="{x:Type Utils:Cell}">
      <Border BorderThickness=".15" BorderBrush="Black">
        <ContentPresenter Content="{Binding Piece}"/>
      </Border>
    </DataTemplate>
  </Window.Resources>
  <!--  <StackPanel>-->
  <!--    <Button Click="Button_Click">Connect</Button>-->
  <Viewbox Margin="10">
    <ItemsControl Width="180" Height="180" ItemsSource="{Binding}">
      <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
          <UniformGrid Rows="9" Columns="9"/>
        </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
    </ItemsControl>
<!--    <UniformGrid Rows="9" Columns="9"-->
<!--                 x:Name="_board" Width="180" -->
<!--                 Height="180"/>-->
  </Viewbox>
  <!--  </StackPanel>-->
</Window>
